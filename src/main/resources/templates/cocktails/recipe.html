<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/">
<head th:replace="fragments :: head"></head>

<body class="container">
<div th:replace="fragments :: header"></div>

<p id="recipe-text" th:text="${recipeText}">Recipe Text</p>

<!--Adding Comment Feature:-->
<table>
    <thead>
    <tr>
        <th>Comments</th>
    </tr>
    </thead>

    <tr th:each="comment : ${comments}">
        <td th:text="${comment.dateAdded}">Date Added</td>
        <td th:text="${comment.userName}">Written By</td>
        <td th:text="${comment.contents}">Comment Contents</td>
    </tr>
</table>

<div th:if="${comments.size() == 0}">No comments so far.</div>

<div id="addCommentButton">
    <button >Add Comment</button>
</div>

<div id="commentPopup" style="display: none;">
    <br>
    <form method="post" action="cocktails/recipe/comment">
        <textarea id="commentText" name="contents" rows="4" cols="50"></textarea>
        <br>
        <input type="submit" value="Submit Comment">
    </form>
</div>

<script th:inline="javascript">
    document.getElementById('addCommentButton').addEventListener('click', function() {
        let popup = document.getElementById('commentPopup');
        let commentText = document.getElementById('commentText');
        popup.style.display = 'block';
        commentText.focus();
        popup.scrollIntoView({
            behavior: 'smooth',
            block: 'center'
        });

    });
</script>

</body>
</html>